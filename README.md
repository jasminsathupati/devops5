# devops-lab-ex1
# Initialize git repository
git init

# Create README file
echo "# flutterexperiments" >> README.md

# Add all files
git add .

# Commit changes
git commit -m "first commit"

# Set branch name to main
git branch -M main

# Add GitHub remote
git remote add origin https://github.com/deepakurk22cs1081/flutterexperiments.git

# Push code to GitHub
git push -u origin main

ğŸ³ EXPERIMENT 2 â€” Docker Static Web Page
ğŸ“ Steps
# Step 1: Create Project Folder
mkdir docker-demo
cd docker-demo


index.html

<h1>Hello from Docker!</h1>


Dockerfile

FROM nginx
COPY index.html /usr/share/nginx/html/index.html

# Step 4: Build Docker Image
docker build -t myweb:v1 .

# Step 5: Run Docker Container
docker run -d -p 8080:80 myweb:v1


ğŸ“ Open browser â†’ http://localhost:8080

ğŸ§  EXPERIMENT 3 â€” Flask App in Docker

Folder Structure

flask-docker-app/
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ Dockerfile

ğŸ§© Step-by-Step Procedure

app.py

from flask import Flask, render_template_string

app = Flask(__name__)

HTML_TEMPLATE = """
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flask Docker App</title>
<style>
body {
background: linear-gradient(to right, #00c6ff, #0072ff);
color: white;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
text-align: center;
padding-top: 100px;
}
h1 { font-size: 3em; margin-bottom: 0.2em; }
p { font-size: 1.5em; }
.card {
background: rgba(255, 255, 255, 0.1);
padding: 2em;
border-radius: 20px;
box-shadow: 0 0 20px rgba(0,0,0,0.3);
width: 50%;
margin: auto;
}
</style>
</head>
<body>
<div class="card">
<h1>ğŸš€ Welcome to Flask + Docker!</h1>
<p>This is a vibrant web page running inside a Docker container.</p>
<p>Change the code â†’ Rebuild â†’ Restart Docker to see updates!</p>
</div>
</body>
</html>
"""

@app.route('/')
def home():
    return render_template_string(HTML_TEMPLATE)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)


requirements.txt

Flask==2.2.5


Dockerfile

FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 5000
CMD ["python", "app.py"]

ğŸ§± Build & Run
# Build Docker Image
docker build -t flask-docker-app .

# Run Container (choose one)
docker run -p 5000:5000 flask-docker-app
# or if port 5000 is occupied
docker run -p 5050:5000 flask-docker-app


Visit â†’ http://localhost:5050

âš™ï¸ EXPERIMENT 4 â€” Jenkins Static Site Pipeline (Docker Compose)
Step 1: Set up Jenkins with Docker Compose
mkdir ~/jenkins-static-site && cd ~/jenkins-static-site


docker-compose.yml

version: '3.8'
services:
  jenkins:
    image: jenkins/jenkins:lts
    container_name: jenkins
    restart: unless-stopped
    ports:
      - "8080:8080"
      - "50000:50000"
    volumes:
      - jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock

volumes:
  jenkins_home:
    driver: local

# Start Jenkins
docker compose up -d

# Get the initial admin password
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword


ğŸ”— Open http://localhost:8080
 â†’ Complete setup â†’ Install plugins â†’ Create admin user.

Step 2: Install HTML Publisher Plugin

Manage Jenkins â†’ Plugins â†’ Available â†’ Search â€œHTML Publisherâ€ â†’ Install â†’ Restart Jenkins.

Step 3: Create Pipeline Job

Pipeline Script

pipeline {
    agent any
    stages {
        stage('Generate site') {
            steps {
                script {
                    sh 'rm -rf site || true'
                    sh 'mkdir -p site/assets'

                    writeFile file: 'site/index.html', text: """
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Karunya University â€” Simple Site</title>
<link rel="stylesheet" href="assets/style.css"/>
</head>
<body>
<header class="site-header">
<div class="container">
<h1>Karunya University</h1>
<p class="tagline">Values â€” Knowledge â€” Service</p>
</div>
</header>
<main class="container">
<section class="card">
<h2>About Karunya University</h2>
<p>Karunya Institute of Technology and Sciences is a leading centre for higher education in India.</p>
</section>
</main>
<footer class="site-footer container">
<p>&copy; ${new Date().format('yyyy')} Karunya University â€” Generated by Jenkins</p>
</footer>
</body>
</html>
"""

                    writeFile file: 'site/assets/style.css', text: """
body { font-family: Arial, sans-serif; margin:0; }
.container { max-width:800px; margin:0 auto; padding:20px; }
.site-header { background:#0b3d91; color:#fff; padding:20px; }
.tagline { font-size:14px; opacity:0.8; }
.card { background:#fff; border:1px solid #ddd; padding:15px; margin:15px 0; border-radius:6px; }
.site-footer { text-align:center; font-size:12px; color:#555; margin-top:20px; }
"""
                }
            }
        }
        stage('Publish site') {
            steps {
                publishHTML ([
                    allowMissing: false,
                    alwaysLinkToLastBuild: true,
                    keepAll: true,
                    reportDir: 'site',
                    reportFiles: 'index.html',
                    reportName: 'Karunya University - Simple Site'
                ])
            }
        }
    }
    post {
        always {
            archiveArtifacts artifacts: 'site/**', fingerprint: true
        }
    }
}


ğŸ–¥ï¸ Click Build Now â†’ View â€œKarunya University - Simple Siteâ€.

ğŸ§© EXPERIMENT 5 â€” Python CI/CD with GitHub Actions + Docker Hub
Step 1: Create Project
mkdir python-ci-docker-lab
cd python-ci-docker-lab


app.py

def add(a, b):
    return a + b

if __name__ == "__main__":
    print("Hello from Python CI Lab!")
    print("2 + 3 =", add(2, 3))


tests/test_app.py

from app import add

def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0


requirements.txt

pytest==8.3.2


Dockerfile

FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]


.gitignore

__pycache__/
.venv/
.pytest_cache/
.DS_Store
*.pyc

Step 3: Add GitHub Actions Workflow

.github/workflows/ci-dockerhub.yml

name: ci-dockerhub
on:
  push:
    branches: [ "main" ]
    tags: [ "*" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build-test-push:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Run tests
        run: pytest -q

      - name: Docker meta
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ${{ secrets.DOCKERHUB_USERNAME }}/python-ci-lab
          tags: |
            type=raw,value=latest,enable={{is_default_branch}}
            type=sha,prefix=sha-,format=short
            type=ref,event=tag

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Login to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}

      - name: Build and push
        uses: docker/build-push-action@v6
        with:
          context: .
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
          platforms: linux/amd64

Step 4: Test Locally
python app.py
pytest -q
docker build -t yourname/python-ci-lab:local .
docker run --rm yourname/python-ci-lab:local

Step 5: Push to GitHub
git init
git add .
git commit -m "init lab"
git branch -M main
git remote add origin https://github.com/<your-username>/python-ci-docker-lab.git
git push -u origin main


Add GitHub Secrets:

DOCKERHUB_USERNAME

DOCKERHUB_TOKEN

Step 6: Verify Image

Go to GitHub â†’ Actions tab â†’ view logs â†’ check Docker Hub repository
âœ… Image: docker.io/<DOCKERHUB_USERNAME>/python-ci-lab

â˜¸ï¸ EXPERIMENT 6 â€” Kubernetes with Minikube
Prerequisites

Docker installed

kubectl CLI installed

Minikube installed

Step 1: Create a Simple Pod

nginx-pod.yaml

apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
  labels:
    app: nginx
spec:
  containers:
    - name: nginx
      image: nginx:latest
      ports:
        - containerPort: 80

kubectl apply -f nginx-pod.yaml
kubectl get pods
kubectl describe pod nginx-pod
kubectl port-forward pod/nginx-pod 8080:80


ğŸŒ Open â†’ http://localhost:8080

Step 2: Deployment and Scaling
kubectl create deployment my-nginx --image=nginx
kubectl get deployments
kubectl get pods -l app=my-nginx
kubectl scale deployment my-nginx --replicas=3
kubectl set image deployment/my-nginx nginx=nginx:1.25
kubectl rollout status deployment/my-nginx
kubectl rollout undo deployment/my-nginx

Step 3: Expose Deployment as a Service
kubectl expose deployment my-nginx --type=NodePort --port=80
kubectl get svc
minikube service my-nginx --url

Step 4: Cleanup
kubectl delete deployment my-nginx
kubectl delete svc my-nginx
kubectl delete all --all -n default
minikube stop
minikube delete
